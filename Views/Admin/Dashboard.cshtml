@model OneJevelsCompany.Web.Models.Admin.DashboardVm
@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "Dashboard";
}
<div class="grid md:grid-cols-3 gap-6">
    <div class="bg-white rounded-2xl shadow p-5">
        <div class="text-sm text-gray-500">Total Sales</div>
        <div class="text-2xl font-bold">@Model.TotalSales.ToString("C")</div>
    </div>
    <div class="bg-white rounded-2xl shadow p-5">
        <div class="text-sm text-gray-500">Today</div>
        <div class="text-2xl font-bold">@Model.TodaysSales.ToString("C")</div>
    </div>
    <div class="bg-white rounded-2xl shadow p-5">
        <div class="text-sm text-gray-500">Not Initiated</div>
        <div class="text-2xl font-bold">@Model.NotInitiatedValue.ToString("C")</div>
    </div>
</div>

<div class="grid md:grid-cols-2 gap-6 mt-6">
    <div class="bg-white rounded-2xl shadow p-5">
        <h3 class="font-semibold mb-3">Sales Variance (30 days)</h3>
        <table class="min-w-full text-left">
            <thead class="text-sm text-gray-500">
                <tr><th class="py-1">Category</th><th class="py-1">Actual</th><th class="py-1">Forecast</th></tr>
            </thead>
            <tbody>
                @foreach (var v in Model.Variances)
                {
                    <tr class="border-t">
                        <td class="py-2">@v.Category</td>
                        <td class="py-2">@v.Actual.ToString("C")</td>
                        <td class="py-2">@v.Forecast.ToString("C")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="bg-white rounded-2xl shadow p-5">
        <h3 class="font-semibold mb-3">Recent Milestones</h3>
        @if (Model.Milestones?.Any() == true)
        {
            <ul class="space-y-2">
                @foreach (var m in Model.Milestones)
                {
                    <li class="border rounded p-2">
                        <div class="font-medium">@m.Title</div>
                        <div class="text-xs text-gray-500">@m.When.ToLocalTime().ToString("yyyy-MM-dd HH:mm")</div>
                    </li>
                }
            </ul>
        }
        else
        {
            <div class="text-sm text-gray-500">No recent milestones.</div>
        }
    </div>
</div>
